
> soccer-book-api@0.0.1 typeorm
> env-cmd ts-node -r tsconfig-paths/register ./node_modules/typeorm/cli.js --dataSource=src/database/data-source.ts schema:log

query: SELECT version()
query: SELECT * FROM current_schema()
query: CREATE EXTENSION IF NOT EXISTS "uuid-ossp"
query: SELECT * FROM current_schema()
query: SELECT * FROM current_database()
query: SELECT "table_schema", "table_name", obj_description(('"' || "table_schema" || '"."' || "table_name" || '"')::regclass, 'pg_class') AS table_comment FROM "information_schema"."tables" WHERE ("table_schema" = 'public' AND "table_name" = 'role') OR ("table_schema" = 'public' AND "table_name" = 'status') OR ("table_schema" = 'public' AND "table_name" = 'file') OR ("table_schema" = 'public' AND "table_name" = 'address') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_socket') OR ("table_schema" = 'public' AND "table_name" = 'company_category') OR ("table_schema" = 'public' AND "table_name" = 'company') OR ("table_schema" = 'public' AND "table_name" = 'user_tenant') OR ("table_schema" = 'public' AND "table_name" = 'user_testimonial') OR ("table_schema" = 'public' AND "table_name" = 'tender_category') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_user_tender') OR ("table_schema" = 'public' AND "table_name" = 'user_tender') OR ("table_schema" = 'public' AND "table_name" = 'post_category') OR ("table_schema" = 'public' AND "table_name" = 'company_offer') OR ("table_schema" = 'public' AND "table_name" = 'user_request_offer') OR ("table_schema" = 'public' AND "table_name" = 'token_category') OR ("table_schema" = 'public' AND "table_name" = 'session') OR ("table_schema" = 'public' AND "table_name" = 'otp') OR ("table_schema" = 'public' AND "table_name" = 'notification') OR ("table_schema" = 'public' AND "table_name" = 'notification_recipient') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_company_tender') OR ("table_schema" = 'public' AND "table_name" = 'company_tender') OR ("table_schema" = 'public' AND "table_name" = 'company_subscription_token') OR ("table_schema" = 'public' AND "table_name" = 'company_post') OR ("table_schema" = 'public' AND "table_name" = 'chat') OR ("table_schema" = 'public' AND "table_name" = 'chat_message') OR ("table_schema" = 'public' AND "table_name" = 'company_categories_company_category') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_user_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'user_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_offer_images_file') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_company_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_post_images_file') OR ("table_schema" = 'public' AND "table_name" = 'chat_participants_user')
query: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
query: SELECT columns.*, pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description, ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE ("table_schema" = 'public' AND "table_name" = 'role') OR ("table_schema" = 'public' AND "table_name" = 'status') OR ("table_schema" = 'public' AND "table_name" = 'file') OR ("table_schema" = 'public' AND "table_name" = 'address') OR ("table_schema" = 'public' AND "table_name" = 'token_category') OR ("table_schema" = 'public' AND "table_name" = 'company_subscription_token') OR ("table_schema" = 'public' AND "table_name" = 'company_category') OR ("table_schema" = 'public' AND "table_name" = 'user_tenant') OR ("table_schema" = 'public' AND "table_name" = 'user_socket') OR ("table_schema" = 'public' AND "table_name" = 'user') OR ("table_schema" = 'public' AND "table_name" = 'user_testimonial') OR ("table_schema" = 'public' AND "table_name" = 'tender_category') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_user_tender') OR ("table_schema" = 'public' AND "table_name" = 'user_tender') OR ("table_schema" = 'public' AND "table_name" = 'post_category') OR ("table_schema" = 'public' AND "table_name" = 'company_offer') OR ("table_schema" = 'public' AND "table_name" = 'user_request_offer') OR ("table_schema" = 'public' AND "table_name" = 'session') OR ("table_schema" = 'public' AND "table_name" = 'otp') OR ("table_schema" = 'public' AND "table_name" = 'notification') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_company_tender') OR ("table_schema" = 'public' AND "table_name" = 'company_tender') OR ("table_schema" = 'public' AND "table_name" = 'company_post') OR ("table_schema" = 'public' AND "table_name" = 'chat') OR ("table_schema" = 'public' AND "table_name" = 'chat_message') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_user_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'user_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_offer_images_file') OR ("table_schema" = 'public' AND "table_name" = 'company_participation_company_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_tender_documents_file') OR ("table_schema" = 'public' AND "table_name" = 'company_post_images_file') OR ("table_schema" = 'public' AND "table_name" = 'chat_participants_user') OR ("table_schema" = 'public' AND "table_name" = 'company') OR ("table_schema" = 'public' AND "table_name" = 'notification_recipient') OR ("table_schema" = 'public' AND "table_name" = 'company_categories_company_category')
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'public' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'status') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'address') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'token_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_subscription_token') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tenant') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_socket') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_testimonial') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'tender_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_user_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'post_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_offer') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_request_offer') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'otp') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'notification') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_company_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_post') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat_message') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_offer_images_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_post_images_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat_participants_user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'notification_recipient') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_categories_company_category'))
query: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name", "am"."amname" AS "index_type" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" INNER JOIN "pg_am" "am" ON "i"."relam" = "am"."oid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'public' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'status') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'address') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'token_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_subscription_token') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tenant') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_socket') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_testimonial') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'tender_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_user_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'post_category') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_offer') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_request_offer') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'session') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'otp') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'notification') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_company_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_tender') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_post') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat_message') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_offer_images_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_participation_company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_post_images_file') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'chat_participants_user') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'notification_recipient') OR ("ns"."nspname" = 'public' AND "t"."relname" = 'company_categories_company_category'))
query: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'public' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'status') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'address') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'token_category') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_subscription_token') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_category') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_tenant') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_socket') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_testimonial') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'tender_category') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_participation_user_tender') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_tender') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'post_category') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_offer') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_request_offer') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'session') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'otp') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'notification') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_participation_company_tender') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_tender') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_post') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'chat') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'chat_message') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_participation_user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'user_tender_documents_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_offer_images_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_participation_company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_tender_documents_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_post_images_file') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'chat_participants_user') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'notification_recipient') OR ("ns"."nspname" = 'public' AND "cl"."relname" = 'company_categories_company_category')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'notification' AND "column_name"='scheduled_notification'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'chat_message' AND "column_name"='content_type'
query: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'public' AND "table_name" = 'chat_message' AND "column_name"='content'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'timestamp'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'chat_message_content_type_enum'
query: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'public' AND "t"."typname" = 'text'
query: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = 'public' AND "table_name" = 'typeorm_metadata'
----------------------------------------------------------------
-- Schema synchronization will execute following sql queries (1):
----------------------------------------------------------------
ALTER TABLE "company" ALTER COLUMN "registration_number" DROP NOT NULL;
